<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Valentine Envelope</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preload" href="assets/lily-watermark.png" as="image">
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital@0;1&family=Allura&display=swap" rel="stylesheet">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Felipa&display=swap" rel="stylesheet">
  <style>
    /* Background floating hearts */
    body {
    position: relative;
    overflow: hidden;
    }

    .heart-float {
        position: absolute;
        width: 300px; /* control size here */
        height: 300px;
        opacity: 0.2;
        pointer-events: none;
        animation: float 20s infinite ease-in-out;
        z-index: 0;
        object-fit: contain;
    }


    body .heart-float:nth-of-type(1) { top: 70%; left: 30%; animation-delay: -2s; }
    body .heart-float:nth-of-type(2) { top: -10%; left: 20%; animation-delay: -7s; }
    body .heart-float:nth-of-type(3) { top: 35%; left: -20%; animation-delay: -5s; }
    body .heart-float:nth-of-type(4) { top: 60%; left: -15%; animation-delay: -4s; }
    body .heart-float:nth-of-type(5) { top: 50%; left: 35%; animation-delay: -6s; }
    body .heart-float:nth-of-type(6) { top: 5%; left: 50%; animation-delay: -9s; }
    body .heart-float:nth-of-type(7) { top: 5%; left: -10%; animation-delay: -3s; }
    body .heart-float:nth-of-type(8) { top: 40%; left: 70%; animation-delay: -8s; }


    @keyframes float {
      0%, 100% { transform: translateY(0px) rotate(0deg); }
      50% { transform: translateY(-30px) rotate(10deg); }
    }

    /* Perspective */
    .perspective {
      perspective: 1200px;
    }

    /* Envelope */
    .envelope {
      transform-style: preserve-3d;
      transition: transform 0.8s cubic-bezier(.22,.61,.36,1);
    }

    /* Envelope slides down when open */
    .envelope.open {
      transform: translateY(120px);
    }

    /* Envelope body */
    .body {
      position: absolute;
      inset: 0;
      background: linear-gradient(135deg, #5b0f1b, #7a1426);
      border-radius: 6px;
      z-index: 1;
      box-shadow:
        inset 0 0 0 2px rgba(255,255,255,0.08),
        0 20px 40px rgba(0,0,0,0.35);
    }

    /* Inner envelope side triangles */
    .inner-left,
    .inner-right {
      position: absolute;
      top: 0;
      width: 50%;
      height: 100%;
      background: linear-gradient(135deg, #6a1223, #4f0d19);
      z-index: 3;
    }

    .inner-left {
      left: 0;
      clip-path: polygon(
        0% 100%,
        0% 0%,
        200% 100%
      );
    }

    .inner-right {
      right: 0;
      clip-path: polygon(
        100% 100%,
        -100% 100%,
        100% 0%
      );
    }

    /* Flap */
    .flap {
      position: absolute;
      inset: 0;
      background: linear-gradient(135deg, #6d1324, #4a0c17);
      clip-path: polygon(0 0, 50% 55%, 100% 0);
      transform-origin: top center;
      transform: rotateX(0deg);
      transition: transform 2s cubic-bezier(.22,.61,.36,1);
      z-index: 4;
      transform-style: preserve-3d;
    }

    .envelope.open .flap {
      transform: rotateX(180deg);
      z-index: 1;
      transition: transform 1s cubic-bezier(.22,.61,.36,1), z-index 1s 0.1s;
    }

    /* Letter */
    .letter {
      position: absolute;
      left: 50%;
      bottom: 0;
      width: 280px;
      height: 200px; /* initially same as envelope */
      background: #faf4f4;
      transform: translateX(-50%);
      transition: height 2.5s cubic-bezier(.22,.61,.36,1) 1s;
      z-index: 2;
      border-radius: 4px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
      overflow: hidden; /* hide extra text until letter grows */
    }

    .envelope.open .letter {
      height: 505px; /* full letter height */
    }

    .letter-inner {
      padding: 20px;
      text-align: justify;
      font-family: "Felipa", serif;
      font-size: 19px;
      line-height: 1.6;
      color: #471c1c;
      height: 100%;
      overflow: hidden;
      opacity: 1;
      transform: none;
      transition: none;
    }

    .letter-inner p:last-child,
    .letter-inner p:nth-last-child(2) {
        text-align: center;
        margin-top: 8px; /* optional spacing */
    }

    .envelope.open .letter-inner {
      opacity: 1;
      transform: translateY(0);
    }

    .letter h1 {
      font-family: "Felipa", serif;
      font-size: 24px;
      margin-bottom: 14px;
    }

    /* Heart seal */
    .heart {
      position: absolute;
      left: 50%;
      top: 55%;
      width: 56px;
      height: 56px;
      background: #ff1744;
      transform: translate(-50%, -50%) rotate(-45deg);
      cursor: pointer;
      z-index: 5;
      animation: pulse 1.5s ease-in-out infinite;
      box-shadow: 0 6px 18px rgba(255,23,68,0.45);
      border: none;
      outline: none;
    }

    .heart::before,
    .heart::after {
      content: "";
      position: absolute;
      width: 56px;
      height: 56px;
      background: #ff1744;
      border-radius: 50%;
    }

    .heart::before {
      top: -28px;
      left: 0;
    }

    .heart::after {
      left: 28px;
      top: 0;
    }

    .heart.clicked {
      animation: heartBounce 1.5s cubic-bezier(.36,.07,.19,.97) forwards;
    }

    @keyframes heartBounce {
      0% {
        transform: translate(-50%, -50%) rotate(-45deg) translateY(0) scale(1);
        opacity: 1;
      }
      35% {
        transform: translate(-50%, -50%) rotate(-45deg) translateY(-50px) scale(1.1);
        opacity: 1;
      }
      50% {
        transform: translate(-50%, -50%) rotate(-45deg) translateY(-50px) scale(1.1);
        opacity: 1;
      }
      100% {
        transform: translate(-50%, -50%) rotate(-45deg) translateY(30px) scale(0.8);
        opacity: 0;
      }
    }

    @keyframes pulse {
      0%, 100% { 
        transform: translate(-50%, -50%) rotate(-45deg) scale(1); 
      }
      50% { 
        transform: translate(-50%, -50%) rotate(-45deg) scale(1.12); 
      }
    }
  </style>
</head>
<body class="relative min-h-screen flex items-center justify-center bg-gradient-to-br from-rose-100 to-pink-200 overflow-hidden">
    <img src="assets/lily-watermark.png" class="heart-float">
    <img src="assets/lily-watermark.png" class="heart-float">
    <img src="assets/lily-watermark.png" class="heart-float">
    <img src="assets/lily-watermark.png" class="heart-float">
    <img src="assets/lily-watermark.png" class="heart-float">
    <img src="assets/lily-watermark.png" class="heart-float">
    <img src="assets/lily-watermark.png" class="heart-float">
    <img src="assets/lily-watermark.png" class="heart-float">


  <div class="relative w-[330px] h-[420px] perspective">

    <!-- Envelope -->
    <div id="envelope" class="envelope relative w-full h-[200px] mt-[130px]">
      <!-- Letter INSIDE envelope -->
      <div id="letter" class="letter">
        <div class="letter-inner">
          <h1>To my dearest Leora,</h1>
          <p>Never have I seen a woman with a prettier soul. All my roads lead to you and there's not enough words in existence to describe how much light you bring to life. No distance too big, no time too long to wait for you.</p>
          <p>Happy valentines sweetheart,</p>
          <p>I appreciate you being in my life.</p>
          <p>Yours forever,</p>
          <p>I</p>
        </div>
      </div>
      <!-- Envelope body -->
      <div class="body"></div>

      <div class="inner-left"></div>
      <div class="inner-right"></div>

      <!-- Top flap -->
      <div class="flap"></div>
      <!-- Heart seal -->
      <button id="heart" class="heart"></button>
    </div>
  </div>

  <script>
    const envelope = document.getElementById("envelope");
    const heart = document.getElementById("heart");
    let opened = false;

    heart.addEventListener("click", (e) => {
      e.preventDefault();
      if (opened) return;
      opened = true;
      
      // Step 1: Start heart bounce animation
      heart.classList.add("clicked");
      
      // Step 2: Open envelope (flap + letter) slightly after heart starts bouncing
      setTimeout(() => {
        envelope.classList.add("open");
      }, 300);
      
      // Step 3: Disable heart after animation
      setTimeout(() => {
        heart.style.pointerEvents = "none";
      }, 800);
    });
  </script>
</body>
</html>
